<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 8: Comprehensive Review | Microprocessor 8085</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Inter:wght@400;600;700&family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">

    <style>
        body { background-color: #f8fafc; }
        
        /* Fonts */
        .font-en { font-family: 'Inter', sans-serif; }
        .font-ar { font-family: 'Cairo', sans-serif; }
        .font-code { font-family: 'Fira Code', monospace; }

        /* RTL Fixes */
        .is-rtl {
            direction: rtl !important;
            text-align: right !important;
        }
        .is-rtl code, 
        .is-rtl .en-term {
            direction: ltr;
            unicode-bidi: isolate; 
            font-family: 'Fira Code', monospace;
            background-color: #f1f5f9;
            padding: 0 4px;
            border-radius: 4px;
            font-size: 0.9em;
            display: inline-block; 
        }
        .is-rtl ul { padding-right: 1.5rem; padding-left: 0; }

        /* Code Window */
        .code-window {
            background: #1e1e2e;
            border-radius: 12px;
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
            border: 1px solid #313244;
            overflow: hidden;
            direction: ltr;
            text-align: left;
        }
        .window-header {
            background: #181825;
            padding: 10px 16px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #313244;
        }
        .dot { width: 10px; height: 10px; border-radius: 50%; margin-right: 6px; }

        /* Syntax Highlighting */
        .asm-cmd { color: #cba6f7; font-weight: bold; } 
        .asm-reg { color: #89b4fa; font-weight: bold; }
        .asm-num { color: #fab387; }
        .asm-comment { color: #6c7086; font-style: italic; }
        .asm-label { color: #94e2d5; font-weight: bold; }

        [v-cloak] { display: none; }
    </style>
</head>

<body class="antialiased text-slate-800">

    <div id="app" v-cloak class="min-h-screen flex flex-col">

        <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-200 shadow-sm">
            <div class="container mx-auto px-4 h-16 flex items-center justify-between">
                <a href="index.html" class="flex items-center gap-2 text-slate-500 hover:text-blue-600 transition-colors font-en font-bold text-sm">
                    <i class="ph-bold ph-arrow-left text-lg"></i>
                    <span class="hidden md:inline">Back to Home</span>
                </a>
                
                <div class="absolute left-1/2 transform -translate-x-1/2 text-center">
                    <span class="text-xs font-bold text-blue-600 uppercase tracking-widest font-en">Chapter 8</span>
                    <h1 class="font-en font-bold text-slate-800 text-sm md:text-base">Review Guide</h1>
                </div>

                <button @click="toggleLanguage"
                    class="flex items-center gap-2 px-3 py-1.5 rounded-full border transition-all text-xs font-bold font-en"
                    :class="showArabic ? 'bg-blue-50 border-blue-200 text-blue-700' : 'bg-slate-50 border-slate-200 text-slate-500 hover:bg-slate-100'">
                    <i class="ph-fill ph-translate text-lg"></i>
                    <span>{{ showArabic ? 'AR : ON' : 'AR : OFF' }}</span>
                </button>
            </div>
        </nav>

        <header class="bg-slate-900 text-white py-12 relative overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-br from-slate-800 to-gray-900"></div>
            <div class="container mx-auto px-4 relative z-10 text-center">
                <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/20 text-xs font-en mb-4">
                    <span class="w-2 h-2 rounded-full bg-gray-400 animate-pulse"></span>
                    Comprehensive Review
                </div>
                <h1 class="text-3xl md:text-5xl font-en font-black mb-4">8085 Review Guide</h1>
                
                <div class="max-w-xl mx-auto min-h-[3rem]">
                    <p v-if="showArabic" class="font-ar text-slate-300 text-lg md:text-xl is-rtl">
                        المراجعة الشاملة: المعمارية، السجلات، التعليمات، وأهم الأسئلة.
                    </p>
                    <p v-else class="font-en text-slate-400 text-sm md:text-base">
                        Architecture, Registers, System Bus, and Instruction Set Summary.
                    </p>
                </div>
            </div>
        </header>

        <main class="flex-grow container mx-auto px-4 py-12 max-w-4xl space-y-12">

            




            <section v-for="(section, index) in chapterData" :key="index" class="scroll-mt-24">
                
                <div class="flex flex-col md:flex-row md:items-baseline gap-2 mb-6 border-b border-slate-200 pb-2">
                    <h2 class="text-2xl font-en font-bold text-slate-800">{{ section.title_en }}</h2>
                    <span v-if="showArabic" class="text-lg font-ar text-blue-600 is-rtl w-full md:w-auto md:ml-auto">
                        {{ section.title_ar }}
                    </span>
                </div>

                <div class="mb-6 space-y-2" v-if="section.desc_en">
                    <p class="font-en text-slate-600 leading-relaxed" v-html="section.desc_en"></p>
                    <div v-if="showArabic" class="is-rtl bg-blue-50/50 p-3 rounded-lg border-r-4 border-blue-400">
                        <p class="font-ar text-slate-600 text-sm leading-relaxed" v-html="section.desc_ar"></p>
                    </div>
                </div>

                <div class="grid gap-6">
                    <div v-for="(item, idx) in section.items" :key="idx"
                        class="bg-white rounded-xl border border-slate-100 shadow-sm hover:shadow-md transition-shadow p-6 relative overflow-hidden">

                        <div class="absolute left-0 top-0 h-full w-1" :class="section.colorClass"></div>

                        <div v-if="item.type === 'list'">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-en font-bold text-lg text-slate-800" v-html="item.head_en"></h3>
                                <span v-if="item.badge" class="px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider bg-gray-100 text-gray-700 font-en border border-gray-200">
                                    {{ item.badge }}
                                </span>
                            </div>
                            <div class="grid gap-3">
                                <div class="font-en text-slate-600 text-sm leading-relaxed pl-2 border-l border-slate-200">
                                    <span v-html="item.text_en"></span>
                                </div>
                                <div v-if="showArabic" class="is-rtl font-ar text-slate-600 text-sm leading-relaxed pr-2 border-r border-blue-200">
                                    <span v-html="item.text_ar"></span>
                                </div>
                            </div>
                        </div>

                        <div v-if="item.type === 'table'" class="overflow-x-auto">
                            <table class="w-full text-left border-collapse">
                                <thead>
                                    <tr class="bg-slate-50 border-b border-slate-200 text-xs uppercase font-en text-slate-500">
                                        <th v-for="h in item.headers" class="p-3">{{ h }}</th>
                                    </tr>
                                </thead>
                                <tbody class="text-sm font-en">
                                    <tr v-for="row in item.rows" class="border-b border-slate-50 hover:bg-slate-50/50">
                                        <td v-for="cell in row" class="p-3 text-slate-700 font-medium" v-html="cell"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div v-if="item.type === 'code'" class="dir-ltr">
                            <div class="code-window">
                                <div class="window-header">
                                    <div class="flex gap-1.5">
                                        <div class="dot bg-red-400"></div>
                                        <div class="dot bg-yellow-400"></div>
                                        <div class="dot bg-green-400"></div>
                                    </div>
                                    <div class="ml-auto text-[10px] font-code text-slate-500 uppercase opacity-60">ASM Trace</div>
                                </div>
                                <pre class="m-0 bg-[#1e1e2e] p-5 overflow-x-auto"><code class="font-code text-sm !bg-transparent p-0 text-slate-200 block" v-html="highlightASM(item.code)"></code></pre>
                            </div>
                            <div class="mt-4 border-t border-slate-100 pt-3">
                                <h4 class="font-en font-bold text-xs text-slate-500 uppercase mb-2">Trace Steps:</h4>
                                <div class="font-en text-sm text-slate-600 mb-3" v-html="item.exp_en"></div>
                                <div v-if="showArabic" class="is-rtl font-ar text-sm text-blue-800 bg-blue-50 p-3 rounded border-r-2 border-blue-400">
                                    <span v-html="item.exp_ar"></span>
                                </div>
                            </div>
                        </div>

                        <div v-if="item.type === 'tip'" class="bg-amber-50 p-4 rounded-lg border border-amber-200">
                            <h3 class="font-en font-bold text-amber-800 mb-2 flex items-center gap-2">
                                <i class="ph-fill ph-lightbulb"></i> {{ item.head_en }}
                            </h3>
                            <div class="space-y-2">
                                <p class="font-en text-sm text-amber-900" v-html="item.text_en"></p>
                                <p v-if="showArabic" class="is-rtl font-ar text-sm text-amber-900 border-r-2 border-amber-400 pr-2" v-html="item.text_ar"></p>
                            </div>
                        </div>

                    </div>
                </div>
            </section>

        </main>

        <footer class="py-8 text-center text-slate-400 text-xs font-en border-t border-slate-200">
            <p>IT Engineering - 2026 | 8085 Microprocessor Course</p>
        </footer>

    </div>

    <script>
        const { createApp, ref } = Vue;

        createApp({
            setup() {
                const showArabic = ref(true);
                const toggleLanguage = () => showArabic.value = !showArabic.value;

                // --- Syntax Highlighter ---
                const highlightASM = (code) => {
                    if (!code) return '';
                    
                    const instructions = /\b(MOV|MVI|LDA|STA|LHLD|SHLD|LXI|LDAX|STAX|XCHG|ADD|ADI|SUB|SUI|INR|DCR|INX|DCX|DAD|JMP|JZ|JNZ|JC|JNC|CALL|RET|HLT|OUT|IN|CMP|CPI|ORA|AND|XOR|CMA)\b/ig;
                    const registers = /\b(A|B|C|D|E|H|L|SP|PC|PSW|M)\b/g;
                    const hex = /\b([0-9][0-9A-F]*H?|[0-9A-F]+H)\b/ig;
                    const label = /\b([A-Z0-9_]+:)/ig;

                    return code.split('\n').map(line => {
                        let [codePart, ...commentParts] = line.split(';');
                        let comment = commentParts.join(';');

                        if (codePart) {
                            codePart = codePart
                                .replace(label, '<span class="asm-label">$1</span>')
                                .replace(instructions, '<span class="asm-cmd">$1</span>')
                                .replace(hex, '<span class="asm-num">$1</span>')
                                .replace(registers, '<span class="asm-reg">$1</span>');
                        }
                        if (comment !== undefined && comment !== "") return `${codePart}<span class="asm-comment">;${comment}</span>`;
                        return codePart;
                    }).join('\n');
                };

                // --- DATA STORE (Corrected Math Formatting) ---
                const chapterData = ref([
                    {
                        title_en: "I. Internal Architecture",
                        title_ar: "المعمارية الداخلية",
                        colorClass: "bg-slate-600",
                        items: [
                            {
                                type: "list",
                                head_en: "Main Blocks",
                                text_en: "• <b>ALU:</b> Performs Math/Logic. Stores result in <b>Accumulator</b>.<br>• <b>Timing & Control:</b> Generates signals (RD, WR, ALE).<br>• <b>Instruction Decoder:</b> Interprets fetched machine code.",
                                text_ar: "• <b>ALU:</b> وحدة الحساب والمنطق، وتخزن النتائج دائماً في المركم.<br>• <b>وحدة التوقيت والتحكم:</b> تولد إشارات التحكم.<br>• <b>مفكك التعليمات:</b> يترجم الكود المجلوب من الذاكرة."
                            }
                        ]
                    },
                    {
                        title_en: "II. The Programming Model (Registers)",
                        title_ar: "نموذج البرمجة (السجلات)",
                        colorClass: "bg-blue-600",
                        items: [
                            {
                                type: "list",
                                head_en: "Register Set",
                                text_en: "• <b>General Purpose (8-bit):</b> B, C, D, E, H, L.<br>• <b>Pairs (16-bit):</b> BC, DE, HL (HL is Memory Pointer).<br>• <b>Special Purpose:</b><br> - <b>Accumulator (A):</b> Holds operands & results.<br> - <b>PC (16-bit):</b> Points to <b>next</b> byte address.<br> - <b>SP (16-bit):</b> Stack Pointer.",
                                text_ar: "• <b>السجلات العامة:</b> B,C,D,E,H,L.<br>• <b>الأزواج:</b> BC, DE, HL.<br>• <b>السجلات الخاصة:</b><br> - <b>المركم (A):</b> للعمليات الحسابية.<br> - <b>عداد البرنامج (PC):</b> يشير للعنوان القادم.<br> - <b>مؤشر المكدس (SP):</b> لقمة المكدس."
                            },
                            {
                                type: "list",
                                head_en: "Flag Register (5 Flags)",
                                text_en: "• <b>Sign (S):</b> MSB is 1 (Negative).<br>• <b>Zero (Z):</b> Result is 0.<br>• <b>Aux Carry (AC):</b> Carry from bit 3 to 4.<br>• <b>Parity (P):</b> Even number of 1s.<br>• <b>Carry (CY):</b> Overflow/Borrow.",
                                text_ar: "• <b>S:</b> إشارة (سالب).<br>• <b>Z:</b> صفر.<br>• <b>AC:</b> حمل مساعد.<br>• <b>P:</b> تماثل زوجي.<br>• <b>CY:</b> حمل أو استلاف."
                            }
                        ]
                    },
                    {
                        title_en: "III. The 8085 System Bus",
                        title_ar: "نواقل النظام",
                        colorClass: "bg-green-600",
                        items: [
                            {
                                type: "table",
                                headers: ["Bus Name", "Width", "Direction", "Function"],
                                rows: [
                                    ["<b>Address</b>", "16-bit", "Unidirectional", "Carries Address (2<sup>16</sup> locations)."],
                                    ["<b>Data</b>", "8-bit", "Bidirectional", "Carries Data & Instructions."],
                                    ["<b>Control</b>", "Mixed", "Mixed", "Timing Signals (Read/Write)."]
                                ]
                            }
                        ]
                    },
                    {
                        title_en: "IV & V. Formats & Addressing",
                        title_ar: "صيغ التعليمات وأنماط العنونة",
                        colorClass: "bg-purple-600",
                        items: [
                            {
                                type: "list",
                                head_en: "Instruction Formats (Word Size)",
                                text_en: "1. <b>One-Byte:</b> Opcode only (<code>MOV C,A</code>).<br>2. <b>Two-Byte:</b> Opcode + 8-bit Data (<code>MVI A, 32H</code>).<br>3. <b>Three-Byte:</b> Opcode + 16-bit Address (<code>JMP 2085H</code>).",
                                text_ar: "1. <b>بايت واحد:</b> كود العملية فقط.<br>2. <b>بايتين:</b> كود العملية + بيانات 8 بت.<br>3. <b>ثلاثة بايتات:</b> كود العملية + عنوان 16 بت."
                            },
                            {
                                type: "list",
                                head_en: "Addressing Modes",
                                text_en: "1. <b>Immediate:</b> Data in code (<code>MVI</code>).<br>2. <b>Register:</b> Data in register (<code>MOV</code>).<br>3. <b>Direct:</b> Address in code (<code>IN 00H</code>).<br>4. <b>Indirect:</b> Pointer based (HL Pair).",
                                text_ar: "1. <b>فوري:</b> البيانات داخل الكود.<br>2. <b>سجل:</b> البيانات داخل سجل.<br>3. <b>مباشر:</b> العنوان مكتوب مباشرة.<br>4. <b>غير مباشر:</b> باستخدام مؤشر (HL)."
                            }
                        ]
                    },
                    {
                        title_en: "VI. Instruction Set Classification",
                        title_ar: "تصنيف مجموعة التعليمات",
                        colorClass: "bg-indigo-500",
                        items: [
                            {
                                type: "list",
                                head_en: "Functional Categories",
                                text_en: "1. <b>Data Transfer:</b> Copy data (<code>MOV, MVI, IN</code>).<br>2. <b>Arithmetic:</b> <code>ADD, SUB, INR, DCR</code>.<br>3. <b>Logical:</b> <code>AND, OR, CMA, CMP</code>.<br>4. <b>Branching:</b> <code>JMP, JZ, CALL</code>.<br>5. <b>Machine Control:</b> <code>HLT, NOP</code>.",
                                text_ar: "1. <b>نقل البيانات:</b> نسخ فقط.<br>2. <b>حسابية:</b> جمع وطرح.<br>3. <b>منطقية:</b> بوابات ومقارنة.<br>4. <b>تفرع:</b> قفز واستدعاء.<br>5. <b>تحكم بالآلة:</b> إيقاف ولا شيء."
                            }
                        ]
                    },
                    {
                        title_en: "VII. Sample Program Trace",
                        title_ar: "تتبع برنامج (مثال عملي)",
                        colorClass: "bg-teal-600",
                        items: [
                            {
                                type: "code",
                                code: `MVI D, 8BH   ; Load 8BH to D
MVI C, 6FH   ; Load 6FH to C
MOV A, C     ; Move 6FH to Accumulator
ADD D        ; Add D to A (8BH + 6FH)
OUT PORT1    ; Send Result to Port 1
HLT          ; Stop`,
                                exp_en: "<b>Analysis:</b><br>1. D=8BH, C=6FH.<br>2. A becomes 6FH.<br>3. ALU adds 8BH + 6FH. Result stored in A.<br>4. Result sent to Output.",
                                exp_ar: "<b>التحليل:</b><br>1. تحميل القيم في D و C.<br>2. نقل قيمة C للمركم A (لأن الجمع يتطلب وجود رقم في A).<br>3. جمع D مع A.<br>4. إخراج النتيجة."
                            }
                        ]
                    },
                    {
                        title_en: "VIII. Important Practice Question",
                        title_ar: "سؤال تدريب هام (حساب العناوين)",
                        colorClass: "bg-amber-500",
                        items: [
                            {
                                type: "tip",
                                head_en: "Question: Memory Addressing",
                                text_en: "<b>Q:</b> If you have a memory chip of size 256 Kilobytes (256 &times; 1024), how many address wires are needed?<br><b>Logic:</b><br>• 256 = 2<sup>8</sup>.<br>• 1K = 1024 = 2<sup>10</sup>.<br>• Total = 2<sup>8</sup> &times; 2<sup>10</sup> = 2<sup>18</sup>.<br>• <b>Answer:</b> 18 Address lines.",
                                text_ar: "<b>سؤال:</b> ذاكرة بحجم 256 كيلوبايت، كم خط عنوان تحتاج؟<br><b>الحل:</b><br>• 256 هي 2 أس 8.<br>• الكيلو (1024) هو 2 أس 10.<br>• المجموع (8+10) = 18.<br>• <b>الجواب:</b> نحتاج 18 خط عنوان."
                            }
                        ]
                    }
                ]);

                return { showArabic, toggleLanguage, chapterData, highlightASM };
            }
        }).mount('#app');
    </script>
</body>

</html>